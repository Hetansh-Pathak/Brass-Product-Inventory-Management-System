<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Raw Material Inventory</title>
  <link rel="stylesheet" href="available-material.css" />
  <link rel="stylesheet" href="/darkmode.css" />
  <style>
    /* Highlight matching row */
    .highlight {
      background-color: #ffff99 !important;
    }

    .search-bar {
      margin: 20px;
      text-align: center;
    }

    .search-bar input {
      padding: 8px;
      width: 300px;
      font-size: 16px;
    }

    .search-bar button {
      padding: 8px 12px;
      font-size: 16px;
    }
  </style>
</head>
<body>

  <header>
    <h1>Raw Material Inventory</h1>
    <nav>
      <ul>
        <li><a href="/inventory/inventory.html">Inventory</a></li>
        <li><a href="#" class="active">Available-Raw-Material</a></li>
      </ul>
    </nav>
  </header>

  <!-- Search Bar -->
  <div class="search-bar">
    <input type="text" id="searchInput" placeholder="Search Raw Material..." />
    <button onclick="searchMaterial()">Search</button>
  </div>

  <section class="raw-material">
    <h2>Add New Raw Material</h2>
    <table>
      <thead>
        <tr>
          <th>Material Name</th>
          <th>Supplier</th>
          <th>Quantity</th>
          <th>Cost</th>
          <th>Date</th>
          <th>HSN Code</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><input type="text" id="matName" placeholder="Material Name" /></td>
          <td><input type="text" id="matSupplier" placeholder="Supplier" /></td>
          <td><input type="text" id="matQty" placeholder="Quantity (e.g. 100 kg)" /></td>
          <td><input type="text" id="matCost" placeholder="Cost (e.g. $800)" /></td>
          <td><input type="date" id="matDate" /></td>
          <td><input type="text" id="matHSN" placeholder="HSN Code" /></td>
          <td><button onclick="addMaterialRow()">Add</button></td>
        </tr>
      </tbody>
    </table>

    <h3>Available Raw Materials</h3>
    <table id="raw-material-table">
      <thead>
        <tr>
          <th>Material Name</th>
          <th>Supplier</th>
          <th>Quantity</th>
          <th>Cost</th>
          <th>Date</th>
          <th>HSN Code</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <!-- New rows go here -->
      </tbody>
    </table>
  </section>

  <script>
    function addMaterialRow() {
      const name = document.getElementById("matName").value.trim();
      const supplier = document.getElementById("matSupplier").value.trim();
      const qty = document.getElementById("matQty").value.trim();
      const cost = document.getElementById("matCost").value.trim();
      const date = document.getElementById("matDate").value;
      const hsn = document.getElementById("matHSN").value.trim();

      if (!name || !supplier || !qty || !cost || !date || !hsn) {
        alert("Please fill all material fields.");
        return;
      }

      const table = document.getElementById("raw-material-table").querySelector("tbody");
      const newRow = document.createElement("tr");

      newRow.innerHTML = `
        <td><input type="text" value="${name}" readonly></td>
        <td><input type="text" value="${supplier}" readonly></td>
        <td><input type="text" value="${qty}" readonly></td>
        <td><input type="text" value="${cost}" readonly></td>
        <td><input type="date" value="${date}" readonly></td>
        <td><input type="text" value="${hsn}" readonly></td>
        <td><button onclick="deleteRow(this)">Delete</button></td>
      `;
      table.appendChild(newRow);

      // Clear input fields
      document.getElementById("matName").value = "";
      document.getElementById("matSupplier").value = "";
      document.getElementById("matQty").value = "";
      document.getElementById("matCost").value = "";
      document.getElementById("matDate").value = "";
      document.getElementById("matHSN").value = "";
    }

    function deleteRow(button) {
      const row = button.closest("tr");
      row.remove();
    }

    function searchMaterial() {
      const input = document.getElementById("searchInput").value.toLowerCase().trim();
      const rows = document.querySelectorAll("#raw-material-table tbody tr");
      let found = false;

      rows.forEach(row => {
        row.classList.remove("highlight"); // Clear any previous highlights
        const cells = row.querySelectorAll("td input");
        for (let cell of cells) {
          if (cell.value.toLowerCase().includes(input)) {
            row.classList.add("highlight");
            found = true;
            break;
          }
        }
      });

      if (!found && input !== "") {
        alert("No matching raw material found.");
      }
    }
  </script>

</body>
</html>
